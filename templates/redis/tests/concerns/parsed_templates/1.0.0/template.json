{
    "files": [],
    "template": {
        "deployment_type": "docker_server",
        "meta": {
            "icon": "redis",
            "name": "Redis",
            "baseline": "An open-source key-value datastore.",
            "description": "Redis is an open-source key-value datastore.",
            "categories": [ "database" ]
        },
        "form": [
            {
                "title": "General",
                "questions": [
                    {
                        "variable": "redis_version",
                        "label": "Version",
                        "required": true,
                        "immutable": true,
                        "type": "select",
                        "options": [
                            { "value": "5.0", "label": "5.0" },
                            { "value": "6.0", "label": "6.0" }
                        ]
                    },
                    {
                        "variable": "redis_password",
                        "label": "Password",
                        "hint": "Smoothy generates a random 64 character long string as password. However, you are free to change this and choose your own password.",
                        "required": true,
                        "immutable": true,
                        "type": "string",
                        "default": "{{ random_string(64) }}"
                    }
                ]
            },
            {
                "title": "Resources",
                "questions": [
                    {
                        "variable": "memory",
                        "label": "Memory",
                        "hint": "The amount of memory allocated to the Redis database.",
                        "type": "binary_number",
                        "minimum": 1024,
                        "default": 2048
                    },
                    {
                        "variable": "cpus",
                        "label": "CPU",
                        "hint": "The number of CPU millicores allocated to the Redis database.",
                        "type": "number",
                        "default": 1000
                    }
                ]
            }
        ],
        "upgrades": [],
        "deployment": [
            {
                "resource": "container",
                "name": "redis",
                "image": "bitnami/redis:6.0",
                "volume_mounts": [
                    {
                        "volume": "service_volume_redis_data",
                        "mount_path": "/bitnami/redis/data"
                    }
                ],
                "environment": [
                    { 
                        "key": "REDIS_PASSWORD", 
                        "value": "abc123"
                    }
                ],
                "memory": 2048,
                "cpus": 1000
            },
            { 
                "resource": "volume", 
                "name": "redis_data" 
            },
            {
                "resource": "entrypoint",
                "name": "redis",
                "title": "Redis database",
                "container": "service_container_redis",
                "port": 6379
            }
        ],
        "interface": {
            "logs": [ 
                { 
                    "title": "Redis logs",
                    "container": "service_container_redis" 
                }
            ]
        }
    }
}